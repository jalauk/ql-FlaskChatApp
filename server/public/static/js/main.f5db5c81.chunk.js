(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(99),r=a.n(n),i=(a(124),a(10)),l=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,186)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))},o=a(3),d=a(66),j=a(11),u=a(22),m=a(5),b=a(39),h=a(177),p=a(0);var O=function(){var e=Object(i.l)();Object(c.useEffect)((function(){localStorage.setItem("reload","1"),localStorage.getItem("user")&&e("/chat")}),[]);var t=Object(c.useState)({email:"",password:""}),a=Object(m.a)(t,2),s=a[0],n=a[1],r=function(){var t=Object(u.a)(Object(j.a)().mark((function t(a){var c,n,r,i,l;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c=s.username,n=s.email,r=s.password,t.next=4,h.a.post("".concat("http://192.168.1.94:5000","/api/user/login"),{username:c,email:n,password:r});case 4:i=t.sent,!1===(l=i.data).status&&alert(l.data.message),!0===l.status&&(localStorage.setItem("access_token",l.data.tokens.access_token),localStorage.setItem("refresh_token",l.data.tokens.refresh_token),localStorage.setItem("user",JSON.stringify(l.data.user)),e("/chat"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(e){n(Object(d.a)(Object(d.a)({},s),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(p.jsx)("div",{className:"form-membership",children:Object(p.jsxs)("div",{className:"form-wrapper",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"612px",height:"612px",viewBox:"0 0 612 612",style:{enableBackground:"new 0 0 612 612"},xmlSpace:"preserve",children:[Object(p.jsx)("g",{children:Object(p.jsx)("g",{id:"_x32__26_",children:Object(p.jsx)("g",{children:Object(p.jsx)("path",{d:"M401.625,325.125h-191.25c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h191.25\r c10.557,0,19.125-8.568,19.125-19.125S412.182,325.125,401.625,325.125z M439.875,210.375h-267.75\r c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h267.75c10.557,0,19.125-8.568,19.125-19.125\r S450.432,210.375,439.875,210.375z M306,0C137.012,0,0,119.875,0,267.75c0,84.514,44.848,159.751,114.75,208.826V612\r l134.047-81.339c18.552,3.061,37.638,4.839,57.203,4.839c169.008,0,306-119.875,306-267.75C612,119.875,475.008,0,306,0z\r M306,497.25c-22.338,0-43.911-2.601-64.643-7.019l-90.041,54.123l1.205-88.701C83.5,414.133,38.25,345.513,38.25,267.75\r c0-126.741,119.875-229.5,267.75-229.5c147.875,0,267.75,102.759,267.75,229.5S453.875,497.25,306,497.25z"})})})}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{})]})}),Object(p.jsx)("h5",{children:"Sign in"}),Object(p.jsxs)("form",{onSubmit:function(e){return r(e)},children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"email",className:"form-control",placeholder:"email",name:"email",required:!0,autoFocus:!0,onChange:function(e){return l(e)}})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",required:!0,onChange:function(e){return l(e)}})}),Object(p.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign in"}),Object(p.jsx)("hr",{}),Object(p.jsx)("p",{className:"text-muted",children:"Login with your social media account."}),Object(p.jsx)("hr",{}),Object(p.jsx)("p",{className:"text-muted",children:"Don't have an account?"}),Object(p.jsx)(b.a,{to:"/register",className:"btn btn-outline-light btn-sm",children:"Register now!"})]})]})})};var x=function(){var e=Object(i.l)(),t=Object(c.useState)({username:"",email:"",password:"",confirmPassword:""}),a=Object(m.a)(t,2),s=a[0],n=a[1];Object(c.useEffect)((function(){localStorage.getItem("user")&&e("/chat")}),[]);var r=function(){var t=Object(u.a)(Object(j.a)().mark((function t(a){var c,n,r,i,l;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c=s.username,n=s.email,r=s.password,t.next=4,h.a.post("".concat("http://192.168.1.94:5000","/api/user/signup"),{username:c,email:n,password:r});case 4:i=t.sent,l=i.data,console.log(l),!1===l.status&&alert(l.data.message),!0===l.status&&e("/");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(e){n(Object(d.a)(Object(d.a)({},s),{},Object(o.a)({},e.target.name,e.target.value)))};return Object(p.jsx)("div",{className:"form-membership",children:Object(p.jsxs)("div",{className:"form-wrapper",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"612px",height:"612px",viewBox:"0 0 612 612",style:{enableBackground:"new 0 0 612 612"},xmlSpace:"preserve",children:[Object(p.jsx)("g",{children:Object(p.jsx)("g",{id:"_x32__26_",children:Object(p.jsx)("g",{children:Object(p.jsx)("path",{d:"M401.625,325.125h-191.25c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h191.25\r c10.557,0,19.125-8.568,19.125-19.125S412.182,325.125,401.625,325.125z M439.875,210.375h-267.75\r c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h267.75c10.557,0,19.125-8.568,19.125-19.125\r S450.432,210.375,439.875,210.375z M306,0C137.012,0,0,119.875,0,267.75c0,84.514,44.848,159.751,114.75,208.826V612\r l134.047-81.339c18.552,3.061,37.638,4.839,57.203,4.839c169.008,0,306-119.875,306-267.75C612,119.875,475.008,0,306,0z\r M306,497.25c-22.338,0-43.911-2.601-64.643-7.019l-90.041,54.123l1.205-88.701C83.5,414.133,38.25,345.513,38.25,267.75\r c0-126.741,119.875-229.5,267.75-229.5c147.875,0,267.75,102.759,267.75,229.5S453.875,497.25,306,497.25z"})})})}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{})]})}),Object(p.jsx)("h5",{children:"Create account"}),Object(p.jsxs)("form",{onSubmit:function(e){return r(e)},children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",required:!0,autoFocus:!0,onChange:function(e){return l(e)}})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",required:!0,onChange:function(e){return l(e)}})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",required:!0,onChange:function(e){return l(e)}})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Confirm Password",name:"confirmPassword",required:!0,onChange:function(e){return l(e)}})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Register"}),Object(p.jsx)("hr",{}),Object(p.jsx)("p",{className:"text-muted",children:"Already have an account?"}),Object(p.jsx)(b.a,{to:"/",className:"btn btn-outline-light btn-sm",children:"Sign in!"})]})]})})},g=a(105),f=a(21),v=a(60),N=a.n(v);var w=function(e){var t=e.handleSendMessage,a=e.socket,s=e.currentUser,n=e.currentChat,r=Object(c.useState)(""),i=Object(m.a)(r,2),l=i[0],o=i[1];return Object(p.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),l.length>0&&(t(l),o(""))}(e)},children:[Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"btn btn-light mr-3","data-toggle":"tooltip",title:"Emoji",type:"button",children:Object(p.jsx)("i",{"data-feather":"smile"})})}),Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Write a message.",name:"message",value:l,onChange:function(e){return function(e){o(e.target.value),a.current.emit("is-typing",{from:s._id.$oid,room_id:n.room_id})}(e)}}),Object(p.jsxs)("div",{className:"form-buttons",children:[Object(p.jsx)("button",{className:"btn btn-light","data-toggle":"tooltip",title:"Add files",type:"button",children:Object(p.jsx)("i",{"data-feather":"paperclip"})}),Object(p.jsx)("button",{className:"btn btn-light d-sm-none d-block","data-toggle":"tooltip",title:"Send a voice record",type:"button",children:Object(p.jsx)("i",{"data-feather":"mic"})}),Object(p.jsxs)("button",{className:"btn btn-primary",type:"submit",children:[Object(p.jsx)("i",{"data-feather":"send"}),"submit"]})]})]})};var _=function(e){var t=e.currentChat,a=e.currentUser,s=e.socket,n=e.previousChat,r=e.refectChangesOnChatbarAfterSendingMessage,i=Object(c.useState)([]),l=Object(m.a)(i,2),o=l[0],d=l[1],b=Object(c.useRef)(),O=Object(c.useRef)(),x=Object(c.useState)(1),g=Object(m.a)(x,2),v=g[0],_=g[1],y=Object(c.useState)(!1),C=Object(m.a)(y,2),k=C[0],S=C[1];Object(c.useEffect)((function(){S(!1)}),[t]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(Object(j.a)().mark((function e(){var a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat("http://192.168.1.94:5000","/api/message/get-all-message?page=0"),{room_id:t.room_id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 2:a=e.sent,d(a.data.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return r.apply(this,arguments)}function r(){return(r=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&s.current.emit("leave-room",{room_id:n.room_id,user_id:a._id.$oid},(function(e){}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"room_id"in t?(void 0!==n&&c(),s.current.emit("join-room",{room_id:t.room_id,from:a._id.$oid,to:t._id.$oid},(function(e){})),function(){e.apply(this,arguments)}()):(void 0!==n&&c(),s.current.emit("create-room",{user_id:a._id.$oid,friend_id:t._id.$oid},(function(e){t.room_id=e,console.log("room_id : ",e)})),d([]))}),[t]),Object(c.useEffect)((function(){s.current&&s.current.on("receive-message",(function(e){console.log("receives-message",e);var t=Object(f.a)(o);t.push(e),d(t),S(!1),r(e)}))}),[o]),Object(c.useEffect)((function(){s.current.on("typing",(function(e){e.from!=a._id.$oid&&(document.getElementById("typing").style.display="block",setTimeout((function(){document.getElementById("typing").style.display="none"}),2e3))}))}),[]);var D=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){var a,c,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.current){e.next=11;break}if(a=O.current,c=a.scrollTop,a.scrollHeight,a.clientHeight,!("room_id"in t)){e.next=11;break}if(0!=c){e.next=11;break}return e.next=6,h.a.post("".concat("http://192.168.1.94:5000","/api/message/get-all-message?page=").concat(v),{room_id:t.room_id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 6:s=e.sent,console.log(s),S(!0),d((function(e){return[].concat(Object(f.a)(null===s||void 0===s?void 0:s.data.data),Object(f.a)(e))})),_((function(e){return e+1}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function I(e,t){for(var a=0;a<e.length;a++)if(e[a]._id.$oid===t)return e[a].username}function z(e){var t=new Date;return e=new Date(e),t.getDate()-e.getDate()===1?"yesterday, ".concat(N()(e).format("LT")):t.getDate()-e.getDate()<1?N()(e).format("LT"):N()(e).format("lll")}return Object(c.useEffect)((function(){s.current.on("message-seen",(function(e){if(t.room_id===e.room_id){var a=structuredClone(o);a.forEach((function(e,a){e.seen_by=t._id.$oid})),d(a)}}))})),Object(c.useEffect)((function(){var e;k||(null===(e=b.current)||void 0===e||e.scrollIntoView({behaviour:"smooth"}))}),[o]),Object(p.jsxs)("div",{className:"chat",children:[Object(p.jsxs)("div",{className:"chat-header",children:[Object(p.jsxs)("div",{className:"chat-header-user",children:[Object(p.jsx)("figure",{className:"avatar",children:null!==t&&void 0!==t&&t.is_group?Object(p.jsx)("span",{className:"avatar-title bg-warning bg-success rounded-circle",children:Object(p.jsx)("i",{className:"fa fa-users"})}):null!==t&&void 0!==t&&t.profile?Object(p.jsx)("img",{src:null===t||void 0===t?void 0:t.profile,className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:t.is_group?t.group_name:t.username}),Object(p.jsx)("small",{className:"text-success",id:"typing",style:{display:"none"},children:Object(p.jsx)("i",{children:"writing..."})})]})]}),Object(p.jsx)("div",{className:"chat-header-action",style:{display:"none"},children:Object(p.jsxs)("ul",{className:"list-inline",children:[Object(p.jsx)("li",{className:"list-inline-item d-xl-none d-inline",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light mobile-navigation-button",children:Object(p.jsx)("i",{"data-feather":"menu"})})}),Object(p.jsx)("li",{className:"list-inline-item","data-toggle":"tooltip",title:"Voice call",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-success","data-toggle":"modal","data-target":"#call",children:Object(p.jsx)("i",{"data-feather":"phone"})})}),Object(p.jsx)("li",{className:"list-inline-item","data-toggle":"tooltip",title:"Video call",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-warning","data-toggle":"modal","data-target":"#videoCall",children:Object(p.jsx)("i",{"data-feather":"video"})})}),Object(p.jsxs)("li",{className:"list-inline-item",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light","data-toggle":"dropdown",children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},"data-navigation-target":"contact-information",className:"dropdown-item",children:"Profile"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Add to archive"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Delete"}),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item text-danger",children:"Block"})]})]})]})})]}),Object(p.jsx)("div",{className:"chat-body",onScroll:D,ref:O,children:Object(p.jsx)("div",{className:"messages",children:o.map((function(e,c){return Object(p.jsxs)("div",{ref:b,className:"message-item ".concat(a._id.$oid===e.from?"outgoing-message":""),children:[Object(p.jsxs)("div",{className:"message-avatar",children:[Object(p.jsx)("figure",{className:"avatar",children:a._id.$oid===e.from?Object(p.jsx)("img",{src:null!==a&&void 0!==a&&a.profile?null===a||void 0===a?void 0:a.profile:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:null!==t&&void 0!==t&&t.profile?null===t||void 0===t?void 0:t.profile:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:t.is_group?a._id.$oid===e.from?a.username:I(t.participants,e.from):a._id.$oid===e.from?a.username:t.username}),Object(p.jsxs)("div",{className:"time",children:[z(e.time),Object(p.jsx)("i",{className:e.from===a._id.$oid&&e.seen_by.length>0?"ti-double-check text-info":""})]})]})]}),Object(p.jsx)("div",{className:"message-content",children:e.message})]},c)}))})}),Object(p.jsx)("div",{className:"chat-footer",children:Object(p.jsx)(w,{handleSendMessage:function(e){s.current.emit("send-message",{room_id:t.room_id,from:a._id.$oid,to:t._id.$oid,message:e},(function(e){return console.log("sendmessage : ",{data:e})}))},socket:s,currentUser:a,currentChat:t})})]})};var y=function(){return Object(p.jsxs)("div",{id:"archived",className:"sidebar",children:[Object(p.jsxs)("header",{children:[Object(p.jsx)("span",{children:"Archived"}),Object(p.jsx)("ul",{className:"list-inline",children:Object(p.jsx)("li",{className:"list-inline-item d-xl-none d-inline",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-danger sidebar-close",children:Object(p.jsx)("i",{"data-feather":"x"})})})})]}),Object(p.jsx)("form",{children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search archived"})}),Object(p.jsx)("div",{className:"sidebar-body",children:Object(p.jsxs)("ul",{className:"list-group list-group-flush users-list",children:[Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("figure",{className:"avatar",children:Object(p.jsx)("span",{className:"avatar-title bg-danger rounded-circle",children:"M"})}),Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Mercedes Pllu"}),Object(p.jsx)("p",{children:"I know how important this file is to you. You can trust me ;)"})]}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Open"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Restore"}),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item text-danger",children:"Delete"})]})]})})})]})]}),Object(p.jsxs)("li",{className:"list-group-item",children:[Object(p.jsx)("figure",{className:"avatar",children:Object(p.jsx)("span",{className:"avatar-title bg-secondary rounded-circle",children:"R"})}),Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Rochelle Golley"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sitsdc sdcsdc sdcsdcs"})]}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Open"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Restore"}),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item text-danger",children:"Delete"})]})]})})})]})]})]})})]})};var C=function(){return Object(p.jsxs)("div",{id:"favorites",className:"sidebar",children:[Object(p.jsxs)("header",{children:[Object(p.jsx)("span",{children:"Favorites"}),Object(p.jsx)("ul",{className:"list-inline",children:Object(p.jsx)("li",{className:"list-inline-item d-xl-none d-inline",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-danger sidebar-close",children:Object(p.jsx)("i",{"data-feather":"x"})})})})]}),Object(p.jsx)("form",{children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search favorites"})}),Object(p.jsx)("div",{className:"sidebar-body",children:Object(p.jsxs)("ul",{className:"list-group list-group-flush users-list",children:[Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Jennica Kindred"}),Object(p.jsx)("p",{children:"I know how important this file is to you. You can trust me ;)"})]}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Open"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Remove favorites"})]})]})})})]})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Marvin Rohan"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sitsdc sdcsdc sdcsdcs"})]}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Open"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Remove favorites"})]})]})})})]})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Frans Hanscombe"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sitsdc sdcsdc sdcsdcs"})]}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Open"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Remove favorites"})]})]})})})]})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Karl Hubane"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sitsdc sdcsdc sdcsdcs"})]}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Open"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"Remove favorites"})]})]})})})]})})]})})]})};var k=function(e){var t=e.currentUser;return Object(p.jsx)("nav",{className:"navigation",children:Object(p.jsx)("div",{className:"nav-group",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{className:"logo",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},children:Object(p.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"612px",height:"612px",viewBox:"0 0 612 612",style:{enableBackground:"new 0 0 612 612"},xmlSpace:"preserve",children:[Object(p.jsx)("g",{children:Object(p.jsx)("g",{id:"_x32__26_",children:Object(p.jsx)("g",{children:Object(p.jsx)("path",{d:"M401.625,325.125h-191.25c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h191.25\r c10.557,0,19.125-8.568,19.125-19.125S412.182,325.125,401.625,325.125z M439.875,210.375h-267.75\r c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h267.75c10.557,0,19.125-8.568,19.125-19.125\r S450.432,210.375,439.875,210.375z M306,0C137.012,0,0,119.875,0,267.75c0,84.514,44.848,159.751,114.75,208.826V612\r l134.047-81.339c18.552,3.061,37.638,4.839,57.203,4.839c169.008,0,306-119.875,306-267.75C612,119.875,475.008,0,306,0z\r M306,497.25c-22.338,0-43.911-2.601-64.643-7.019l-90.041,54.123l1.205-88.701C83.5,414.133,38.25,345.513,38.25,267.75\r c0-126.741,119.875-229.5,267.75-229.5c147.875,0,267.75,102.759,267.75,229.5S453.875,497.25,306,497.25z"})})})}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{}),Object(p.jsx)("g",{})]})})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{className:"active","data-navigation-target":"chats",onClick:function(e){return e.preventDefault()},"data-toggle":"tooltip",title:"Chats","data-placement":"right",children:Object(p.jsx)("i",{"data-feather":"message-circle"})})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{"data-navigation-target":"friends",onClick:function(e){return e.preventDefault()},"data-toggle":"tooltip",title:"Friends","data-placement":"right",children:Object(p.jsx)("i",{"data-feather":"user"})})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{"data-navigation-target":"favorites","data-toggle":"tooltip",title:"Favorites","data-placement":"right",onClick:function(e){return e.preventDefault()},style:{display:"none"},children:Object(p.jsx)("i",{"data-feather":"star"})})}),Object(p.jsx)("li",{className:"brackets",children:Object(p.jsx)("a",{"data-navigation-target":"archived",onClick:function(e){return e.preventDefault()},"data-toggle":"tooltip",title:"Archived","data-placement":"right",style:{display:"none"},children:Object(p.jsx)("i",{"data-feather":"archive"})})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dark-light-switcher","data-toggle":"tooltip",title:"Light mode","data-placement":"right",children:Object(p.jsx)("i",{"data-feather":"moon"})})}),Object(p.jsxs)("li",{"data-toggle":"tooltip",title:"User menu","data-placement":"right",children:[Object(p.jsx)("a",{href:"login.html","data-toggle":"dropdown",children:Object(p.jsx)("figure",{className:"avatar",children:null!==t&&void 0!==t&&t.profile?Object(p.jsx)("img",{src:null===t||void 0===t?void 0:t.profile,className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})})}),Object(p.jsxs)("div",{className:"dropdown-menu",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item","data-toggle":"modal","data-target":"#editProfileModal",children:"Edit profile"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item","data-navigation-target":"contact-information",children:"Profile"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item","data-toggle":"modal","data-target":"#settingModal",children:"Settings"}),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsx)(b.a,{to:"/",className:"dropdown-item text-danger",onClick:function(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")},children:"Logout"})]})]})]})})})};var S=function(e){var t=e.currentUser,a=e.updateImage,s=Object(c.useState)(""),n=Object(m.a)(s,2),r=n[0],i=n[1],l=Object(c.useState)(""),o=Object(m.a)(l,2),d=o[0],b=o[1],O=Object(c.useState)(!1),x=Object(m.a)(O,2),g=x[0],f=x[1],v=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){var t,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),(t=new FormData).append("file",r),t.append("upload_preset","uuxu9eun"),t.append("cloud_name","dqv4wnzls"),e.next=7,h.a.post("https://api.cloudinary.com/v1_1/dqv4wnzls/image/upload",t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});case 7:return c=e.sent,e.next=10,h.a.patch("".concat("http://192.168.1.94:5000","/api/user/edit-profile"),{profile:c.data.url,name:d},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 10:e.sent,a(c.data.url),f(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"modal fade",id:"editProfileModal",tabIndex:"-1",role:"dialog","aria-hidden":"true",children:Object(p.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-zoom",role:"document",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsxs)("h5",{className:"modal-title",children:[Object(p.jsx)("i",{"data-feather":"edit-2",className:"mr-2"})," Edit Profile"]}),Object(p.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(p.jsx)("i",{className:"ti-close"})})]}),g?Object(p.jsx)("div",{className:"loaderComponent",children:Object(p.jsx)("img",{src:"dist/media/loader.gif",alt:"loader"})}):Object(p.jsx)("div",{className:"modal-body",children:Object(p.jsx)("div",{className:"tab-content",children:Object(p.jsxs)("div",{className:"tab-pane show active",id:"personal",role:"tabpanel",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"fullname",className:"col-form-label",children:"Full Name"}),Object(p.jsxs)("div",{className:"input-group",children:[Object(p.jsx)("input",{type:"text",className:"form-control",id:"fullname",onChange:function(e){return b(e.target.value)}}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("span",{className:"input-group-text",children:Object(p.jsx)("i",{"data-feather":"user"})})})]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"Avatar"}),Object(p.jsxs)("div",{className:"d-flex align-items-center",children:[Object(p.jsx)("div",{children:Object(p.jsx)("figure",{className:"avatar mr-3 item-rtl",children:null!==t&&void 0!==t&&t.profile?Object(p.jsx)("img",{src:null===t||void 0===t?void 0:t.profile,className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})})}),Object(p.jsxs)("div",{className:"custom-file",children:[Object(p.jsx)("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){return i(e.target.files[0])}}),Object(p.jsx)("label",{className:"custom-file-label",htmlFor:"customFile",children:"Choose file"})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary mx-3",onClick:v,children:"Save"})]})]})]})})})]})})})};var D=function(e){var t=e.chat,a=e.index,c=e.changeCurrentChat,s=e.currentSelected;return Object(p.jsxs)("li",{className:"list-group-item ".concat(s===a?"open-chat":""),onClick:function(){return c(a,t)},children:[Object(p.jsx)("figure",{className:!0===t.online?"avatar avatar-state-success":"avatar",children:t.is_group?Object(p.jsx)("span",{className:"avatar-title bg-warning bg-success rounded-circle",children:Object(p.jsx)("i",{className:"fa fa-users"})}):null!==t&&void 0!==t&&t.profile?Object(p.jsx)("img",{src:null===t||void 0===t?void 0:t.profile,className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})}),Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{className:"text-primary",children:t.is_group?t.group_name:t.username}),Object(p.jsx)("p",{children:null===t.message?"":t.message})]}),Object(p.jsxs)("div",{className:"users-list-action",children:[Object(p.jsx)("div",{className:"new-message-count ".concat(0===t.unread_count?"hide-element":""),children:t.unread_count}),Object(p.jsx)("small",{className:"text-primary",children:null===t.message_time?null:function(e){var t=new Date;return e=new Date(e),t.getDate()-e.getDate()===1?"yesterday":t.getDate()-e.getDate()>1?N()(e).format("LL"):N()(e).format("LT")}(t.message_time)})]})]})]})};var I=function(e){var t=e.chatList,a=e.changeChat,s=Object(c.useState)(void 0),n=Object(m.a)(s,2),r=n[0],i=n[1],l=function(e,t){i(e),a(t)};return Object(p.jsxs)("div",{id:"chats",className:"sidebar active",children:[Object(p.jsxs)("header",{children:[Object(p.jsx)("span",{children:"Chats"}),Object(p.jsxs)("ul",{className:"list-inline",children:[Object(p.jsx)("li",{className:"list-inline-item","data-toggle":"tooltip",title:"New group",children:Object(p.jsx)("a",{className:"btn btn-outline-light",onClick:function(e){return e.preventDefault()},"data-toggle":"modal","data-target":"#newGroup",children:Object(p.jsx)("i",{"data-feather":"users"})})}),Object(p.jsx)("li",{className:"list-inline-item",children:Object(p.jsx)("a",{className:"btn btn-outline-light","data-toggle":"tooltip",title:"New chat",onClick:function(e){return e.preventDefault()},"data-navigation-target":"friends",children:Object(p.jsx)("i",{"data-feather":"plus-circle"})})}),Object(p.jsx)("li",{className:"list-inline-item d-xl-none d-inline",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-danger sidebar-close",children:Object(p.jsx)("i",{"data-feather":"x"})})})]})]}),Object(p.jsx)("form",{children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search chats"})}),Object(p.jsx)("div",{className:"sidebar-body",children:Object(p.jsx)("ul",{className:"list-group list-group-flush",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)(D,{chat:e,index:t,changeCurrentChat:l,currentSelected:r},t)}))})})]})},z=a(57),E=a(184),L=a(183),M=a(181),$=a(179),F=a(180),P=a(176),B=a(185),A={PaperProps:{style:{maxHeight:224,width:250}},palette:{mode:"light"}};function R(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}function U(e){var t=e.chatList,a=e.personName,c=e.handlePersonName,s=Object(z.a)();return Object(p.jsx)("div",{children:Object(p.jsxs)(F.a,{sx:{m:1,width:300},children:[Object(p.jsx)(M.a,{id:"demo-multiple-chip-label",children:"Chip"}),Object(p.jsx)(P.a,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:!0,value:a,onChange:function(e){var t=e.target.value;c(t)},input:Object(p.jsx)(L.a,{id:"select-multiple-chip",label:"Chip"}),renderValue:function(e){return Object(p.jsx)(E.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(p.jsx)(B.a,{label:e.username},e.username)}))})},MenuProps:A,children:t.map((function(e){return Object(p.jsx)($.a,{value:e,style:R(e,a,s),children:e.username},e.username)}))})]})})}var T=function(e){var t=e.chatList,a=e.currentUser,n=e.appendGroupInChatList,r=Object(c.useRef)(null),i=s.a.useState([]),l=Object(m.a)(i,2),o=l[0],d=l[1],b=function(){var e=Object(u.a)(Object(j.a)().mark((function e(t){var c,s,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),(c=[]).push(a._id.$oid),s=0;s<o.length;s++)c.push(o[s]._id.$oid);return e.next=6,h.a.post("".concat("http://192.168.1.94:5000","/api/user/create-group"),{participants:c,group_name:t.target[0].value},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 6:(i=e.sent).data.data&&n(i.data.data),r.current.classList.remove("show");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"modal fade",id:"newGroup",tabndex:"-1",role:"dialog","aria-hidden":"true",ref:r,children:Object(p.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-zoom",role:"document",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsxs)("h5",{className:"modal-title",children:[Object(p.jsx)("i",{"data-feather":"users",className:"mr-2"})," New Group"]}),Object(p.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(p.jsx)("i",{className:"ti-close"})})]}),Object(p.jsx)("div",{className:"modal-body",children:Object(p.jsxs)("form",{onSubmit:function(e){return b(e)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"group_name",className:"col-form-label",children:"Group name"}),Object(p.jsxs)("div",{className:"input-group",children:[Object(p.jsx)("input",{type:"text",className:"form-control",id:"group_name"}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("button",{className:"btn btn-light","data-toggle":"tooltip",title:"Emoji",type:"button",children:Object(p.jsx)("i",{"data-feather":"smile"})})})]})]}),Object(p.jsx)("p",{className:"mb-2",children:"The group members"}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("div",{className:"avatar-group",children:Object(p.jsx)("div",{className:"userList",children:Object(p.jsx)(U,{chatList:t,personName:o,handlePersonName:function(e){d("string"===typeof e?e.split(","):e)}})})})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"description",className:"col-form-label",children:"Description"}),Object(p.jsx)("textarea",{className:"form-control",id:"description"})]}),Object(p.jsx)("div",{className:"modal-footer",children:Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create Group"})})]})})]})})})};var q=function(e){var t=e.currentUser;return Object(p.jsx)("div",{className:"sidebar-group",children:Object(p.jsxs)("div",{id:"contact-information",className:"sidebar",children:[Object(p.jsxs)("header",{children:[Object(p.jsx)("span",{children:"Profile"}),Object(p.jsx)("ul",{className:"list-inline",children:Object(p.jsx)("li",{className:"list-inline-item",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-danger sidebar-close",children:Object(p.jsx)("i",{"data-feather":"x"})})})})]}),Object(p.jsx)("div",{className:"sidebar-body",children:Object(p.jsx)("div",{className:"pl-4 pr-4",children:Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("figure",{className:"avatar avatar-xl mb-4",children:null!==t&&void 0!==t&&t.profile?Object(p.jsx)("img",{src:null===t||void 0===t?void 0:t.profile,className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})}),Object(p.jsx)("h5",{className:"mb-1",children:null===t||void 0===t?void 0:t.username}),Object(p.jsx)("small",{className:"text-muted font-italic",children:"Last seen: Today"})]})})})]})})};var G=function(e){var t=e.friendsList,a=e.changeChat,s=Object(c.useState)(void 0),n=Object(m.a)(s,2),r=(n[0],n[1]);return Object(p.jsxs)("div",{id:"friends",className:"sidebar",children:[Object(p.jsxs)("header",{children:[Object(p.jsx)("span",{children:"Friends"}),Object(p.jsxs)("ul",{className:"list-inline",children:[Object(p.jsx)("li",{className:"list-inline-item","data-toggle":"tooltip",title:"Add friends",children:Object(p.jsx)("a",{className:"btn btn-outline-light",onClick:function(e){return e.preventDefault()},"data-toggle":"modal","data-target":"#addFriends",children:Object(p.jsx)("i",{"data-feather":"user-plus"})})}),Object(p.jsx)("li",{className:"list-inline-item d-xl-none d-inline",children:Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"btn btn-outline-light text-danger sidebar-close",children:Object(p.jsx)("i",{"data-feather":"x"})})})]})]}),Object(p.jsx)("form",{children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search friends"})}),Object(p.jsx)("div",{className:"sidebar-body",children:Object(p.jsx)("ul",{className:"list-group list-group-flush",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsxs)("li",{className:"list-group-item","data-navigation-target":"chats",onClick:function(){return function(e,t){r(e),a(t)}(t,e)},children:[Object(p.jsx)("div",{children:Object(p.jsx)("figure",{className:"avatar",children:e.profile?Object(p.jsx)("img",{src:null===e||void 0===e?void 0:e.profile,className:"rounded-circle",alt:"image"}):Object(p.jsx)("img",{src:"dist/media/img/profile-icon.webp",className:"rounded-circle",alt:"image"})})}),Object(p.jsxs)("div",{className:"users-list-body",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h5",{children:e.username})}),Object(p.jsx)("div",{className:"users-list-action",children:Object(p.jsx)("div",{className:"action-toggle",children:Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)("a",{"data-toggle":"dropdown",onClick:function(e){return e.preventDefault()},children:Object(p.jsx)("i",{"data-feather":"more-horizontal"})}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item",children:"New chat"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},"data-navigation-target":"contact-information",className:"dropdown-item",children:"Profile"}),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsx)("a",{onClick:function(e){return e.preventDefault()},className:"dropdown-item text-danger",children:"Block"})]})]})})})]})]},e._id.$oid)}))})})]})};var V=function(){var e=Object(c.useRef)(),t=Object(i.l)(),a=Object(c.useState)([]),s=Object(m.a)(a,2),n=s[0],r=s[1],l=Object(c.useState)(!1),o=Object(m.a)(l,2),d=o[0],b=o[1],O=Object(c.useState)([]),x=Object(m.a)(O,2),f=x[0],v=x[1],N=Object(c.useState)(void 0),w=Object(m.a)(N,2),D=w[0],z=w[1],E=Object(c.useState)(void 0),L=Object(m.a)(E,2),M=L[0],$=L[1],F=Object(c.useState)(JSON.parse(localStorage.getItem("user"))),P=Object(m.a)(F,2),B=P[0],A=P[1];function R(e){return e.sort((function(e,t){var a=new Date(t.message_time);if(e.message_time)var c=new Date(e.message_time);else c=new Date(e.chat_created_at);return c<a?1:-1}))}Object(c.useEffect)((function(){"1"===localStorage.getItem("reload")&&(localStorage.setItem("reload","0"),window.location.reload())}),[]),Object(c.useEffect)((function(){localStorage.getItem("user")?b(!0):t("/")}),[d]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat("http://192.168.1.94:5000","/api/user/get-user"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 2:t=e.sent,localStorage.getItem("user")&&localStorage.setItem("user",JSON.stringify(t.data.data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d&&function(){e.apply(this,arguments)}()}),[B]),Object(c.useEffect)((function(){d&&(e.current=Object(g.a)("".concat("http://192.168.1.94:5000")),e.current.on("connect",(function(){e.current.emit("add-user",B._id.$oid)})))}),[d]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(Object(j.a)().mark((function e(){var t,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("access_token"),e.next=3,h.a.get("".concat("http://192.168.1.94:5000","/api/user/get-all-users"),{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,v(a.data.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d&&function(){e.apply(this,arguments)}()}),[D,d]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(Object(j.a)().mark((function e(){var t,a,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("access_token"),e.next=3,h.a.get("".concat("http://192.168.1.94:5000","/api/user/get-all-chats"),{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,console.log("chats : ",a.data.data),c=R(a.data.data),console.log("chats : ",c),r(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d&&function(){e.apply(this,arguments)}()}),[D,d]);var U=function(e){$(D),z(e)};return Object(c.useEffect)((function(){d&&e.current.on("user-online",(function(e){for(var t=structuredClone(n),a=0;a<t.length;a++)t[a]._id.$oid===e&&(t[a].online=!0);console.log("temp",t),r(t)}))}),[n,d]),Object(c.useEffect)((function(){d&&e.current.on("unread-count",(function(t){var a=structuredClone(n),c=!1;a.forEach((function(e,a){e.room_id===t.room_id&&(e.message=t.message,e.unread_count=t.unread_count,e.message_time=t.time,c=!0)})),c||e.current.emit("get-room-detail",{room_id:t.room_id,user_id:B._id.$oid},(function(e){return a.push(e)})),console.log("new_chat_list - 181",a);var s=R(a);console.log("sorted_chat_list - 181",s),r(s)}))}),[n,d]),Object(p.jsxs)("div",{children:[Object(p.jsx)(T,{chatList:n,currentUser:B,appendGroupInChatList:function(e){var t=structuredClone(n);t.push(e),console.log("new_chat_list - 212",t),r(t)}}),Object(p.jsx)(S,{currentUser:B,updateImage:function(e){var t=structuredClone(B);t.profile=e,A(t)}}),Object(p.jsxs)("div",{className:"layout",children:[Object(p.jsx)(k,{currentUser:B}),Object(p.jsxs)("div",{className:"content",children:[Object(p.jsxs)("div",{className:"sidebar-group",children:[Object(p.jsx)(I,{chatList:n,changeChat:U}),Object(p.jsx)(G,{friendsList:f,changeChat:U}),Object(p.jsx)(C,{}),Object(p.jsx)(y,{})]}),void 0===D?Object(p.jsx)("div",{className:"container m-0, p-0",children:Object(p.jsx)("img",{className:"chat-bg-img",src:"/bg image.webp"})}):Object(p.jsx)(_,{currentChat:D,currentUser:B,socket:e,previousChat:M,refectChangesOnChatbarAfterSendingMessage:function(e){var t=structuredClone(n);t.forEach((function(t,a){t.room_id===e.room_id&&B._id.$oid===e.from&&(t.message=e.message,t.unread_count=0,t.message_time=e.time),t.room_id===e.room_id&&B._id.$oid!==e.from&&(t.message=e.message,t.message_time=e.time)})),console.log("new_chat_list - 204",t);var a=R(t);console.log("sorted_chat_list - 206",a),r(a)}}),Object(p.jsx)(q,{currentUser:B})]})]})]})},J=Object(b.b)([{path:"/",element:Object(p.jsx)(O,{})},{path:"/register",element:Object(p.jsx)(x,{})},{path:"/chat",element:Object(p.jsx)(V,{})}]);r.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(i.b,{router:J})),l()}},[[133,1,2]]]);
//# sourceMappingURL=main.f5db5c81.chunk.js.map