{"version":3,"sources":["reportWebVitals.js","pages/login/Login.jsx","pages/register/Register.jsx","pages/chat/components/ChatInput.jsx","pages/chat/components/Chat.jsx","pages/chat/components/Archived.jsx","pages/chat/components/Favorites.jsx","pages/chat/components/Navigation.jsx","pages/chat/components/EditProfile.jsx","pages/chat/components/ChatItem.jsx","pages/chat/components/ChatSidebar.jsx","pages/chat/components/Multiselect.jsx","pages/chat/components/CreateGroup.jsx","pages/chat/components/SidebarGroup.jsx","pages/chat/components/FriendsSidebar.jsx","pages/chat/ChatPage.jsx","router.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","Login","navigate","useNavigate","useEffect","localStorage","setItem","getItem","_useState","useState","email","password","_useState2","_slicedToArray","values","setValues","handleSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","username","_yield$axios$post","data","wrap","_context","prev","next","preventDefault","axios","post","concat","process","sent","status","alert","message","tokens","access_token","refresh_token","JSON","stringify","user","stop","_x","apply","arguments","handleChange","_objectSpread","_defineProperty","target","name","value","_jsx","className","children","_jsxs","version","xmlns","xmlnsXlink","x","y","width","height","viewBox","style","enableBackground","xmlSpace","id","d","onSubmit","type","placeholder","required","autoFocus","onChange","Link","to","Register","confirmPassword","console","log","ChatInput","handleSendMessage","socket","currentUser","currentChat","setMessage","length","sendChat","title","current","emit","_id","$oid","room_id","typing","Chat","previousChat","refectChangesOnChatbarAfterSendingMessage","messages","setMessages","scrollRef","useRef","listInnerRef","_useState3","_useState4","page","setPage","_useState5","_useState6","prevFetch","setPrevFetch","_getAllMessages","messages_list","headers","leaveRoom","_leaveRoom","_callee2","_context2","undefined","getAllMessages","on","tempMessage","_toConsumableArray","push","from","document","getElementById","display","setTimeout","onScroll","_ref2","_callee3","_listInnerRef$current","scrollTop","_context3","scrollHeight","clientHeight","getGroupParticipantUsername","participants","i","formatDate","date","current_date","Date","getDate","moment","format","seen_messages","structuredClone","forEach","index","seen_by","_scrollRef$current","scrollIntoView","behaviour","is_group","profile","src","alt","group_name","onClick","ref","map","time","Archived","Favorites","Navigation","href","removeItem","EditProfile","updateImage","image","setImage","fullName","setFullName","isLoading","setLoading","submitImage","response","FormData","append","patch","url","tabIndex","role","htmlFor","files","ChatItem","chat","changeCurrentChat","currentSelected","online","unread_count","message_time","formatingDate","ChatSidebar","chatList","changeChat","setCurrentSelected","contact","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","palette","mode","getStyles","personName","theme","fontWeight","indexOf","typography","fontWeightRegular","fontWeightMedium","MultipleSelectChip","handlePersonName","useTheme","FormControl","sx","m","InputLabel","Select","labelId","multiple","event","input","OutlinedInput","label","renderValue","selected","Box","flexWrap","gap","Chip","MenuItem","CreateGroup","appendGroupInChatList","closeModalRef","_React$useState","React","_React$useState2","setPersonName","classList","remove","tabndex","split","SidebarGroup","FriendsSidebar","friendsList","friend","ChatPage","setChatList","isLoggedIn","setIsLoggedIn","setFriendsList","_useState7","_useState8","setCurrentChat","_useState9","_useState10","setPreviousChat","_useState11","parse","_useState12","setCurrentUser","sortSideBar","sort","a","b","dateB","dateA","chat_created_at","window","location","reload","_getUser","get","getUser","io","_settingFriendsList","friends_list","settingFriendsList","_settingChatList","chat_list","sorted_chat_list","settingChatList","handleChatChange","temp","new_chat_list","room_exist","user_id","group_info","imageURL","update_current_user","router","createBrowserRouter","path","element","ReactDOM","createRoot","render","RouterProvider"],"mappings":"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","file":"static/js/main.f5db5c81.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Link, useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useState,useLayoutEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('reload', '1');\r\n    if(localStorage.getItem(\"user\")){\r\n      navigate(\"/chat\")\r\n    }\r\n  },[])\r\n\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { username, email, password } = values;\r\n    const { data } = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/login`, {\r\n      username,\r\n      email,\r\n      password,\r\n    });\r\n    if (data.status === false) {\r\n      alert(data.data.message);\r\n    }\r\n    if (data.status === true) {\r\n      localStorage.setItem(\"access_token\",data.data.tokens.access_token)\r\n      localStorage.setItem(\"refresh_token\",data.data.tokens.refresh_token)\r\n      localStorage.setItem(\"user\",JSON.stringify(data.data.user))\r\n      navigate(\"/chat\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-membership\">\r\n      <div className=\"form-wrapper\">\r\n        <div className=\"logo\">\r\n        <svg\r\n          version=\"1.1\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n          x=\"0px\"\r\n          y=\"0px\"\r\n          width=\"612px\"\r\n          height=\"612px\"\r\n          viewBox=\"0 0 612 612\"\r\n          style={{ enableBackground: \"new 0 0 612 612\" }}\r\n          xmlSpace=\"preserve\"\r\n        >\r\n              <g>\r\n                  <g id=\"_x32__26_\">\r\n                      <g>\r\n                      <path d=\"M401.625,325.125h-191.25c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h191.25\r\n                      c10.557,0,19.125-8.568,19.125-19.125S412.182,325.125,401.625,325.125z M439.875,210.375h-267.75\r\n                      c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h267.75c10.557,0,19.125-8.568,19.125-19.125\r\n                      S450.432,210.375,439.875,210.375z M306,0C137.012,0,0,119.875,0,267.75c0,84.514,44.848,159.751,114.75,208.826V612\r\n                      l134.047-81.339c18.552,3.061,37.638,4.839,57.203,4.839c169.008,0,306-119.875,306-267.75C612,119.875,475.008,0,306,0z\r\n                      M306,497.25c-22.338,0-43.911-2.601-64.643-7.019l-90.041,54.123l1.205-88.701C83.5,414.133,38.25,345.513,38.25,267.75\r\n                      c0-126.741,119.875-229.5,267.75-229.5c147.875,0,267.75,102.759,267.75,229.5S453.875,497.25,306,497.25z\"/>\r\n                      </g>\r\n                  </g>\r\n              </g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n              <g></g>\r\n          </svg>\r\n        </div>\r\n\r\n        <h5>Sign in</h5>\r\n\r\n        <form onSubmit={(e) => handleSubmit(e)}>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              placeholder=\"email\"\r\n              name=\"email\"\r\n              required\r\n              autoFocus\r\n              onChange={(e) => handleChange(e)}\r\n            ></input>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              required\r\n              onChange={(e) => handleChange(e)}\r\n            ></input>\r\n          </div>\r\n          <button className=\"btn btn-primary btn-block\">Sign in</button>\r\n          <hr />\r\n          <p className=\"text-muted\">Login with your social media account.</p>\r\n          {/* <ul className=\"list-inline\">\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-facebook\">\r\n                    <i className=\"fa fa-facebook\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-twitter\">\r\n                    <i className=\"fa fa-twitter\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-dribbble\">\r\n                    <i className=\"fa fa-dribbble\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-linkedin\">\r\n                    <i className=\"fa fa-linkedin\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-google\">\r\n                    <i className=\"fa fa-google\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-behance\">\r\n                    <i className=\"fa fa-behance\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-floating btn-instagram\">\r\n                    <i className=\"fa fa-instagram\"></i>\r\n                </a>\r\n            </li>\r\n        </ul> */}\r\n          <hr />\r\n          <p className=\"text-muted\">Don't have an account?</p>\r\n          <Link to=\"/register\" className=\"btn btn-outline-light btn-sm\">\r\n            Register now!\r\n          </Link>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React,{useState,useEffect} from 'react'\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n// import {ToastContainer,toast} from 'react-toastify'\r\n// import \"react-toastify/dist/ReactToastify.css\";\r\nimport axios from \"axios\"\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [values,setValues] = useState({\r\n    username:\"\",\r\n    email:\"\",\r\n    password:\"\",\r\n    confirmPassword:\"\",\r\n  })\r\n\r\n  useEffect(() => {\r\n    if(localStorage.getItem(\"user\")){\r\n      navigate(\"/chat\")\r\n    }\r\n  },[])\r\n\r\n  const handleSubmit = async(e) => {\r\n    e.preventDefault();\r\n    const {username,email,password} = values;\r\n    const {data} = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/signup`,{username,email,password});\r\n    console.log(data)\r\n    if (data.status === false) {\r\n      alert(data.data.message);\r\n    }\r\n    if(data.status === true){\r\n      navigate(\"/\");\r\n    } \r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    setValues({...values,[e.target.name]:e.target.value})\r\n  }\r\n\r\n  return (\r\n    <div className=\"form-membership\">\r\n      <div className=\"form-wrapper\">\r\n        <div className=\"logo\">\r\n        <svg\r\n            version=\"1.1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            width=\"612px\"\r\n            height=\"612px\"\r\n            viewBox=\"0 0 612 612\"\r\n            style={{ enableBackground: \"new 0 0 612 612\" }}\r\n            xmlSpace=\"preserve\"\r\n        >\r\n                <g>\r\n                    <g id=\"_x32__26_\">\r\n                        <g>\r\n                        <path d=\"M401.625,325.125h-191.25c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h191.25\r\n                        c10.557,0,19.125-8.568,19.125-19.125S412.182,325.125,401.625,325.125z M439.875,210.375h-267.75\r\n                        c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h267.75c10.557,0,19.125-8.568,19.125-19.125\r\n                        S450.432,210.375,439.875,210.375z M306,0C137.012,0,0,119.875,0,267.75c0,84.514,44.848,159.751,114.75,208.826V612\r\n                        l134.047-81.339c18.552,3.061,37.638,4.839,57.203,4.839c169.008,0,306-119.875,306-267.75C612,119.875,475.008,0,306,0z\r\n                        M306,497.25c-22.338,0-43.911-2.601-64.643-7.019l-90.041,54.123l1.205-88.701C83.5,414.133,38.25,345.513,38.25,267.75\r\n                        c0-126.741,119.875-229.5,267.75-229.5c147.875,0,267.75,102.759,267.75,229.5S453.875,497.25,306,497.25z\"/>\r\n                        </g>\r\n                    </g>\r\n                </g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n                <g></g>\r\n            </svg>\r\n        </div>\r\n\r\n        <h5>Create account</h5>\r\n\r\n        <form onSubmit={(e) => handleSubmit(e)}>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Username\"\r\n              name=\"username\"\r\n              required\r\n              autoFocus\r\n              onChange={(e) => handleChange(e)}\r\n            />\r\n          </div>\r\n          {/* <div className=\"form-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Lastname\"\r\n              required\r\n            />\r\n          </div> */}\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              required\r\n              onChange={(e) => handleChange(e)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              required\r\n              onChange={(e) => handleChange(e)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Confirm Password\"\r\n              name=\"confirmPassword\"\r\n              required\r\n              onChange={(e) => handleChange(e)}\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary btn-block\">Register</button>\r\n          <hr />\r\n          <p className=\"text-muted\">Already have an account?</p>\r\n          <Link to=\"/\" className=\"btn btn-outline-light btn-sm\">\r\n            Sign in!\r\n          </Link>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import { useState } from \"react\";\r\n\r\nfunction ChatInput({handleSendMessage,socket,currentUser,currentChat}) {\r\n    const [message,setMessage] = useState(\"\");\r\n\r\n    const typing = (e) => {\r\n        setMessage(e.target.value)\r\n        socket.current.emit(\"is-typing\",{\"from\":currentUser._id.$oid,\"room_id\":currentChat.room_id})\r\n    }\r\n\r\n    const sendChat = (e) =>{\r\n        e.preventDefault();\r\n        if(message.length>0){\r\n            handleSendMessage(message)\r\n            setMessage('');\r\n        }\r\n    }\r\n    return (\r\n        <form onSubmit={(e) => sendChat(e)}>\r\n            <div>\r\n                <button className=\"btn btn-light mr-3\" data-toggle=\"tooltip\" title=\"Emoji\" type=\"button\">\r\n                    <i data-feather=\"smile\"></i>\r\n                </button>\r\n            </div>\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Write a message.\" name=\"message\" value={message} onChange={(e) => typing(e)}/>\r\n            <div className=\"form-buttons\">\r\n                <button className=\"btn btn-light\" data-toggle=\"tooltip\" title=\"Add files\" type=\"button\">\r\n                    <i data-feather=\"paperclip\"></i>\r\n                </button>\r\n                <button className=\"btn btn-light d-sm-none d-block\" data-toggle=\"tooltip\"\r\n                        title=\"Send a voice record\" type=\"button\">\r\n                    <i data-feather=\"mic\"></i>\r\n                </button>\r\n                <button className=\"btn btn-primary\" type=\"submit\">\r\n                    <i data-feather=\"send\"></i>\r\n                    submit\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ChatInput;","import axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport ChatInput from \"./ChatInput\";\r\nimport { useState,useEffect,useRef } from \"react\";\r\n\r\nfunction Chat({currentChat,currentUser,socket,previousChat,refectChangesOnChatbarAfterSendingMessage}){\r\n    const [messages, setMessages] = useState([])\r\n    const scrollRef = useRef()\r\n    const listInnerRef = useRef();\r\n    const [page,setPage] = useState(1)\r\n    const [prevFetch,setPrevFetch] = useState(false)\r\n    useEffect(() => {\r\n        setPrevFetch(false)\r\n    },[currentChat])\r\n\r\n    useEffect(() => {\r\n        async function getAllMessages () {\r\n            let messages_list = await axios.post(\r\n                `${process.env.REACT_APP_BASE_URL}/api/message/get-all-message?page=0`,\r\n                {\r\n                    \"room_id\" : currentChat.room_id\r\n                },\r\n                {\r\n                    headers : {\r\n                        \"Authorization\" : `Bearer ${localStorage.getItem(\"access_token\")}`\r\n                    },\r\n                    \r\n                }\r\n            )\r\n            setMessages(messages_list.data.data)    \r\n        }\r\n\r\n        async function leaveRoom() {\r\n            if(currentChat){\r\n                socket.current.emit(\"leave-room\", {\r\n                    \"room_id\":previousChat.room_id,\r\n                    \"user_id\":currentUser._id.$oid\r\n                }, (data)=>{});\r\n            }\r\n        }\r\n\r\n        if(!(\"room_id\" in currentChat)){\r\n            if(previousChat !== undefined){\r\n                leaveRoom()\r\n            }\r\n            socket.current.emit(\"create-room\",{\"user_id\":currentUser._id.$oid,\"friend_id\":currentChat._id.$oid},(room_id) => {\r\n                currentChat.room_id = room_id\r\n                console.log(\"room_id : \",room_id)\r\n            })\r\n            setMessages([])\r\n        }\r\n        else{\r\n            if(previousChat !== undefined){ \r\n                leaveRoom()\r\n            }\r\n\r\n            socket.current.emit(\r\n                \"join-room\",\r\n                {\r\n                    \"room_id\" : currentChat.room_id,\r\n                    \"from\" : currentUser._id.$oid,\r\n                    \"to\" : currentChat._id.$oid,\r\n                },\r\n                (data) => {\r\n                    // alert(\"working\")\r\n                    // console.log(\"joinroom : \",data)\r\n                }\r\n            )\r\n            getAllMessages();\r\n        }\r\n    },[currentChat])\r\n\r\n    const handleSendMessage = (message) => {\r\n        socket.current.emit(\r\n            \"send-message\",\r\n            {\r\n                \"room_id\" : currentChat.room_id,\r\n                \"from\" : currentUser._id.$oid,\r\n                \"to\" : currentChat._id.$oid,\r\n                \"message\" : message\r\n            },(data) => console.log(\"sendmessage : \", {data}))\r\n    }\r\n    \r\n    useEffect(()=>{\r\n      if(socket.current) {\r\n        socket.current.on(\"receive-message\",(data) => {\r\n            console.log(\"receives-message\",data)\r\n            let tempMessage = [...messages]\r\n            tempMessage.push(data)\r\n            setMessages(tempMessage)\r\n            setPrevFetch(false)\r\n            refectChangesOnChatbarAfterSendingMessage(data)\r\n        })\r\n      }\r\n    },[messages])\r\n\r\n    function timer() {\r\n        setTimeout(() => {\r\n            document.getElementById(\"typing\").style.display = \"none\"\r\n        },2000);\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.current.on(\"typing\",(data) => {\r\n            // console.log(data, \" : \",currentUser._id.$oid)\r\n            if(data.from != currentUser._id.$oid)\r\n            {    \r\n                document.getElementById(\"typing\").style.display = \"block\"\r\n                timer();\r\n            }\r\n        })\r\n    },[])\r\n\r\n    const onScroll = async () => {\r\n        if (listInnerRef.current) {\r\n          const { scrollTop, scrollHeight, clientHeight } = listInnerRef.current;\r\n          if(\"room_id\" in currentChat){\r\n            if (scrollTop==0) {\r\n                let messages_list = await axios.post(\r\n                    `${process.env.REACT_APP_BASE_URL}/api/message/get-all-message?page=${page}`,\r\n                    {\r\n                        \"room_id\" : currentChat.room_id\r\n                    },\r\n                    {\r\n                        headers : {\r\n                            \"Authorization\" : `Bearer ${localStorage.getItem(\"access_token\")}`\r\n                        },\r\n                        \r\n                    }\r\n                )\r\n                console.log(messages_list)\r\n                setPrevFetch(true)\r\n                setMessages((prev) => [...messages_list?.data.data,...prev])    \r\n                setPage((prev) => prev + 1);\r\n              }\r\n          }\r\n          \r\n        }\r\n      };\r\n\r\n    function getGroupParticipantUsername(participants,from){\r\n        for(let i=0;i<participants.length;i++){\r\n            if(participants[i]._id.$oid === from)\r\n                return participants[i].username\r\n        }\r\n    }\r\n\r\n    function formatDate(date){\r\n        const current_date = new Date()\r\n        date = new Date(date)\r\n        if(current_date.getDate()-date.getDate()===1)\r\n            return `yesterday, ${moment(date).format('LT')}`\r\n        else if(current_date.getDate()-date.getDate() < 1)\r\n            return moment(date).format('LT')\r\n        else\r\n            return moment(date).format('lll')\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.current.on(\"message-seen\",((data) => {\r\n            if(currentChat.room_id === data.room_id){\r\n                const seen_messages = structuredClone(messages);\r\n                seen_messages.forEach((message,index) => {\r\n                    message.seen_by = currentChat._id.$oid\r\n                })\r\n                setMessages(seen_messages)\r\n            }\r\n        }))\r\n    })\r\n\r\n    useEffect(()=> {\r\n        if(!prevFetch){\r\n            scrollRef.current?.scrollIntoView({behaviour:\"smooth\"})\r\n        }\r\n    },[messages]);\r\n\r\n\r\n    return (\r\n        <div className=\"chat\">\r\n            <div className=\"chat-header\">\r\n                <div className=\"chat-header-user\">\r\n                    <figure className=\"avatar\">\r\n                        {\r\n                            currentChat?.is_group ?\r\n                                <span className=\"avatar-title bg-warning bg-success rounded-circle\">\r\n                                    <i className=\"fa fa-users\"></i> \r\n                                </span>\r\n                            :\r\n                                currentChat?.profile \r\n                                    ? \r\n                                        <img src={currentChat?.profile} className=\"rounded-circle\" alt=\"image\"/>\r\n                                    : \r\n                                        <img src=\"dist/media/img/profile-icon.webp\" className=\"rounded-circle\" alt=\"image\"/>\r\n                        }\r\n                    </figure>\r\n                    <div>\r\n                        <h5>{currentChat.is_group ? currentChat.group_name : currentChat.username}</h5>\r\n                        <small className=\"text-success\" id=\"typing\" style={{display:\"none\"}}>\r\n                            <i>writing...</i>\r\n                        </small>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* useless part */}\r\n                <div className=\"chat-header-action\" style={{display:\"none\"}}>\r\n                    <ul className=\"list-inline\">\r\n                        <li className=\"list-inline-item d-xl-none d-inline\">\r\n                            <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light mobile-navigation-button\">\r\n                                <i data-feather=\"menu\"></i>\r\n                            </a>\r\n                        </li>\r\n                        <li className=\"list-inline-item\" data-toggle=\"tooltip\" title=\"Voice call\">\r\n                            <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light text-success\" data-toggle=\"modal\"\r\n                            data-target=\"#call\">\r\n                                <i data-feather=\"phone\"></i>\r\n                            </a>\r\n                        </li>\r\n                        <li className=\"list-inline-item\" data-toggle=\"tooltip\" title=\"Video call\">\r\n                            <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light text-warning\" data-toggle=\"modal\"\r\n                            data-target=\"#videoCall\">\r\n                                <i data-feather=\"video\"></i>\r\n                            </a>\r\n                        </li>\r\n                        <li className=\"list-inline-item\">\r\n                            <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light\" data-toggle=\"dropdown\">\r\n                                <i data-feather=\"more-horizontal\"></i>\r\n                            </a>\r\n                            <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                <a onClick={ e => e.preventDefault() } data-navigation-target=\"contact-information\"\r\n                                className=\"dropdown-item\">Profile</a>\r\n                                <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Add to archive</a>\r\n                                <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Delete</a>\r\n                                <div className=\"dropdown-divider\"></div>\r\n                                <a onClick={ e => e.preventDefault() } className=\"dropdown-item text-danger\">Block</a>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div className=\"chat-body\" onScroll={onScroll} ref={listInnerRef}>\r\n                <div className=\"messages\">\r\n                        {\r\n                            messages.map((message,index) => {\r\n                                return (\r\n                                    <div key={index} ref={scrollRef} className={`message-item ${currentUser._id.$oid===message.from ? \"outgoing-message\" : \"\"}`}>\r\n                                        <div className=\"message-avatar\">\r\n                                            <figure className=\"avatar\">\r\n                                                {\r\n                                                    currentUser._id.$oid===message.from \r\n                                                        ?\r\n                                                            <img src={currentUser?.profile ? currentUser?.profile : \"dist/media/img/profile-icon.webp\"} className=\"rounded-circle\" alt=\"image\"/>  \r\n                                                        : \r\n                                                            <img src={currentChat?.profile ? currentChat?.profile : \"dist/media/img/profile-icon.webp\"} className=\"rounded-circle\" alt=\"image\"/> \r\n\r\n                                                }\r\n                                           </figure>\r\n                                            <div>\r\n                                                <h5>{currentChat.is_group \r\n                                                        ? \r\n                                                            currentUser._id.$oid===message.from \r\n                                                            ? \r\n                                                                currentUser.username \r\n                                                            : \r\n                                                                getGroupParticipantUsername(currentChat.participants,message.from)\r\n                                                        : \r\n                                                            currentUser._id.$oid===message.from? currentUser.username : currentChat.username}</h5>\r\n                                                            \r\n                                                <div className=\"time\">{formatDate(message.time)}<i className=\r\n                                                    {\r\n                                                        message.from === currentUser._id.$oid \r\n                                                        ? \r\n                                                            message.seen_by.length > 0 ? 'ti-double-check text-info' : \"\" \r\n                                                        : \r\n                                                            \"\"\r\n                                                    }></i></div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"message-content\">\r\n                                            {message.message}\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    \r\n                </div>\r\n            </div>\r\n            <div className=\"chat-footer\">\r\n                <ChatInput handleSendMessage={handleSendMessage} socket={socket} currentUser={currentUser} currentChat={currentChat}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat;","function Archived() {\r\n    return             <div id=\"archived\" className=\"sidebar\">\r\n    <header>\r\n        <span>Archived</span>\r\n        <ul className=\"list-inline\">\r\n            <li className=\"list-inline-item d-xl-none d-inline\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light text-danger sidebar-close\">\r\n                    <i data-feather=\"x\"></i>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </header>\r\n    <form>\r\n        <input type=\"text\" className=\"form-control\" placeholder=\"Search archived\"/>\r\n    </form>\r\n    <div className=\"sidebar-body\">\r\n        <ul className=\"list-group list-group-flush users-list\">\r\n            <li className=\"list-group-item\">\r\n                <figure className=\"avatar\">\r\n                    <span className=\"avatar-title bg-danger rounded-circle\">M</span>\r\n                </figure>\r\n                <div className=\"users-list-body\">\r\n                    <div>\r\n                        <h5>Mercedes Pllu</h5>\r\n                        <p>I know how important this file is to you. You can trust me ;)</p>\r\n                    </div>\r\n                    <div className=\"users-list-action\">\r\n                        <div className=\"action-toggle\">\r\n                            <div className=\"dropdown\">\r\n                                <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                    <i data-feather=\"more-horizontal\"></i>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Open</a>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Restore</a>\r\n                                    <div className=\"dropdown-divider\"></div>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item text-danger\">Delete</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n                <figure className=\"avatar\">\r\n                    <span className=\"avatar-title bg-secondary rounded-circle\">R</span>\r\n                </figure>\r\n                <div className=\"users-list-body\">\r\n                    <div>\r\n                        <h5>Rochelle Golley</h5>\r\n                        <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n                    </div>\r\n                    <div className=\"users-list-action\">\r\n                        <div className=\"action-toggle\">\r\n                            <div className=\"dropdown\">\r\n                                <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                    <i data-feather=\"more-horizontal\"></i>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Open</a>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Restore</a>\r\n                                    <div className=\"dropdown-divider\"></div>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item text-danger\">Delete</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n}\r\n\r\nexport default Archived;","function Favorites(){\r\n    return <div id=\"favorites\" className=\"sidebar\">\r\n    <header>\r\n        <span>Favorites</span>\r\n        <ul className=\"list-inline\">\r\n            <li className=\"list-inline-item d-xl-none d-inline\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light text-danger sidebar-close\">\r\n                    <i data-feather=\"x\"></i>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </header>\r\n    <form>\r\n        <input type=\"text\" className=\"form-control\" placeholder=\"Search favorites\"/>\r\n    </form>\r\n    <div className=\"sidebar-body\">\r\n        <ul className=\"list-group list-group-flush users-list\">\r\n            <li className=\"list-group-item\">\r\n                <div className=\"users-list-body\">\r\n                    <div>\r\n                        <h5>Jennica Kindred</h5>\r\n                        <p>I know how important this file is to you. You can trust me ;)</p>\r\n                    </div>\r\n                    <div className=\"users-list-action\">\r\n                        <div className=\"action-toggle\">\r\n                            <div className=\"dropdown\">\r\n                                <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                    <i data-feather=\"more-horizontal\"></i>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Open</a>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Remove favorites</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n                <div className=\"users-list-body\">\r\n                    <div>\r\n                        <h5>Marvin Rohan</h5>\r\n                        <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n                    </div>\r\n                    <div className=\"users-list-action\">\r\n                        <div className=\"action-toggle\">\r\n                            <div className=\"dropdown\">\r\n                                <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                    <i data-feather=\"more-horizontal\"></i>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Open</a>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Remove favorites</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n                <div className=\"users-list-body\">\r\n                    <div>\r\n                        <h5>Frans Hanscombe</h5>\r\n                        <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n                    </div>\r\n                    <div className=\"users-list-action\">\r\n                        <div className=\"action-toggle\">\r\n                            <div className=\"dropdown\">\r\n                                <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                    <i data-feather=\"more-horizontal\"></i>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Open</a>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Remove favorites</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n                <div className=\"users-list-body\">\r\n                    <div>\r\n                        <h5>Karl Hubane</h5>\r\n                        <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>\r\n                    </div>\r\n                    <div className=\"users-list-action\">\r\n                        <div className=\"action-toggle\">\r\n                            <div className=\"dropdown\">\r\n                                <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                    <i data-feather=\"more-horizontal\"></i>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Open</a>\r\n                                    <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">Remove favorites</a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n}\r\n\r\nexport default Favorites;","import { Link } from \"react-router-dom\";\r\nfunction Navigation({currentUser}) {\r\n    function handleLogout(){\r\n        localStorage.removeItem(\"access_token\")\r\n        localStorage.removeItem(\"refresh_token\")\r\n        localStorage.removeItem(\"user\")\r\n    }\r\n    return (\r\n        <nav className=\"navigation\">\r\n            <div className=\"nav-group\">\r\n                <ul>\r\n                    <li className=\"logo\">\r\n                        <a onClick={ e => e.preventDefault() }>\r\n                        <svg\r\n                            version=\"1.1\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n                            x=\"0px\"\r\n                            y=\"0px\"\r\n                            width=\"612px\"\r\n                            height=\"612px\"\r\n                            viewBox=\"0 0 612 612\"\r\n                            style={{ enableBackground: \"new 0 0 612 612\" }}\r\n                            xmlSpace=\"preserve\"\r\n                        >\r\n                                <g>\r\n                                    <g id=\"_x32__26_\">\r\n                                        <g>\r\n                                        <path d=\"M401.625,325.125h-191.25c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h191.25\r\n                                        c10.557,0,19.125-8.568,19.125-19.125S412.182,325.125,401.625,325.125z M439.875,210.375h-267.75\r\n                                        c-10.557,0-19.125,8.568-19.125,19.125s8.568,19.125,19.125,19.125h267.75c10.557,0,19.125-8.568,19.125-19.125\r\n                                        S450.432,210.375,439.875,210.375z M306,0C137.012,0,0,119.875,0,267.75c0,84.514,44.848,159.751,114.75,208.826V612\r\n                                        l134.047-81.339c18.552,3.061,37.638,4.839,57.203,4.839c169.008,0,306-119.875,306-267.75C612,119.875,475.008,0,306,0z\r\n                                        M306,497.25c-22.338,0-43.911-2.601-64.643-7.019l-90.041,54.123l1.205-88.701C83.5,414.133,38.25,345.513,38.25,267.75\r\n                                        c0-126.741,119.875-229.5,267.75-229.5c147.875,0,267.75,102.759,267.75,229.5S453.875,497.25,306,497.25z\"/>\r\n                                        </g>\r\n                                    </g>\r\n                                </g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                                <g></g>\r\n                            </svg>\r\n                        </a>\r\n                    </li>\r\n                    <li>\r\n                        <a className=\"active\" data-navigation-target=\"chats\" onClick={ e => e.preventDefault() } data-toggle=\"tooltip\" title=\"Chats\"\r\n                        data-placement=\"right\">\r\n                            <i data-feather=\"message-circle\"></i>\r\n                        </a>\r\n                    </li>\r\n                    <li>\r\n                        <a data-navigation-target=\"friends\" onClick={ e => e.preventDefault() } data-toggle=\"tooltip\"\r\n                        title=\"Friends\" data-placement=\"right\">\r\n                            <i data-feather=\"user\"></i>\r\n                        </a>\r\n                    </li>\r\n                    <li>\r\n                        <a data-navigation-target=\"favorites\" data-toggle=\"tooltip\" title=\"Favorites\" data-placement=\"right\"\r\n                        onClick={ e => e.preventDefault() } style={{display:\"none\"}}>\r\n                            <i data-feather=\"star\"></i>\r\n                        </a>\r\n                    </li>\r\n                    <li className=\"brackets\">\r\n                        <a data-navigation-target=\"archived\" onClick={ e => e.preventDefault() } data-toggle=\"tooltip\"\r\n                        title=\"Archived\" data-placement=\"right\" style={{display:\"none\"}}>\r\n                            <i data-feather=\"archive\"></i>\r\n                        </a>\r\n                    </li>\r\n                    <li>\r\n                        <a onClick={ e => e.preventDefault() } className=\"dark-light-switcher\" data-toggle=\"tooltip\" title=\"Light mode\"\r\n                        data-placement=\"right\">\r\n                            <i data-feather=\"moon\"></i>\r\n                        </a>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" title=\"User menu\" data-placement=\"right\">\r\n                        <a href=\"login.html\" data-toggle=\"dropdown\">\r\n                            <figure className=\"avatar\">\r\n                                {\r\n                                    currentUser?.profile ? \r\n                                        <img src={currentUser?.profile} className=\"rounded-circle\" alt=\"image\"/> \r\n                                    :\r\n                                        <img src=\"dist/media/img/profile-icon.webp\" className=\"rounded-circle\" alt=\"image\"/>\r\n                                }\r\n                            </figure>\r\n                        </a>\r\n                        <div className=\"dropdown-menu\">\r\n                            <a onClick={ e => e.preventDefault() } className=\"dropdown-item\" data-toggle=\"modal\" data-target=\"#editProfileModal\">Edit\r\n                                profile</a>\r\n                            <a onClick={ e => e.preventDefault() } className=\"dropdown-item\" data-navigation-target=\"contact-information\">Profile</a>\r\n                            <a onClick={ e => e.preventDefault() } className=\"dropdown-item\" data-toggle=\"modal\" data-target=\"#settingModal\">Settings</a>\r\n                            <div className=\"dropdown-divider\"></div>\r\n                            <Link to=\"/\" className=\"dropdown-item text-danger\" onClick={handleLogout}>Logout</Link>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navigation;","import axios from \"axios\"\r\nimport React,{useState} from \"react\"\r\n\r\nfunction EditProfile({currentUser,updateImage}){\r\n    const [image,setImage] = useState(\"\")\r\n    const [fullName,setFullName] = useState(\"\")\r\n\r\n    const [isLoading, setLoading] = useState(false)\r\n\r\n    const submitImage = async () => {\r\n        setLoading(true)\r\n        const data = new FormData()\r\n        data.append(\"file\",image)\r\n        data.append(\"upload_preset\",\"uuxu9eun\")\r\n        data.append(\"cloud_name\",\"dqv4wnzls\")\r\n        const response = await axios.post(\"https://api.cloudinary.com/v1_1/dqv4wnzls/image/upload\",data,{\r\n            headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'multipart/form-data',\r\n            }\r\n        })\r\n\r\n        const backendRes = await axios.patch(\r\n            `${process.env.REACT_APP_BASE_URL}/api/user/edit-profile`\r\n            ,{\"profile\":response.data.url,\"name\":fullName},\r\n            {\r\n                headers : {\r\n                    \"Authorization\" : `Bearer ${localStorage.getItem(\"access_token\")}`\r\n                },\r\n                \r\n            }\r\n        )\r\n        \r\n        updateImage(response.data.url)\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"editProfileModal\" tabIndex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-centered modal-dialog-zoom\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">\r\n                            <i data-feather=\"edit-2\" className=\"mr-2\"></i> Edit Profile\r\n                        </h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <i className=\"ti-close\"></i>\r\n                        </button>\r\n                    </div>\r\n                    {\r\n                        isLoading ? <div className=\"loaderComponent\"><img src=\"dist/media/loader.gif\" alt=\"loader\" /></div> :<div className=\"modal-body\">\r\n                        <div className=\"tab-content\">\r\n                            <div className=\"tab-pane show active\" id=\"personal\" role=\"tabpanel\">\r\n                                <div className=\"form-group\">\r\n                                    <label htmlFor=\"fullname\" className=\"col-form-label\">Full Name</label>\r\n                                    <div className=\"input-group\">\r\n                                        <input type=\"text\" className=\"form-control\" id=\"fullname\" onChange={(e) => setFullName(e.target.value)}/>\r\n                                        <div className=\"input-group-append\">\r\n                                            <span className=\"input-group-text\">\r\n                                                <i data-feather=\"user\"></i>\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"col-form-label\">Avatar</label>\r\n                                    <div className=\"d-flex align-items-center\">\r\n                                        <div>\r\n                                            <figure className=\"avatar mr-3 item-rtl\">\r\n                                                {\r\n                                                    currentUser?.profile ? \r\n                                                        <img src={currentUser?.profile} className=\"rounded-circle\" alt=\"image\"/> \r\n                                                    :\r\n                                                        <img src=\"dist/media/img/profile-icon.webp\" className=\"rounded-circle\" alt=\"image\"/>\r\n                                                }\r\n                                            </figure>\r\n                                        </div>\r\n                                        <div className=\"custom-file\">\r\n                                            <input type=\"file\" className=\"custom-file-input\" id=\"customFile\" onChange={(e) => setImage(e.target.files[0])}/>\r\n                                            <label className=\"custom-file-label\" htmlFor=\"customFile\">Choose file</label>\r\n                                        </div>\r\n                                        <button type=\"submit\" className=\"btn btn-primary mx-3\" onClick={submitImage}>Save</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditProfile;","import moment from \"moment\";\r\n\r\nfunction ChatItem({ chat, index, changeCurrentChat, currentSelected }) {\r\n  function formatingDate(date) {\r\n    const current_date = new Date();\r\n    date = new Date(date);\r\n    if (current_date.getDate() - date.getDate() === 1) return \"yesterday\";\r\n    else if (current_date.getDate() - date.getDate() > 1)\r\n      return moment(date).format(\"LL\");\r\n    else return moment(date).format(\"LT\");\r\n  }\r\n\r\n  return (\r\n    <li\r\n      className={`list-group-item ${\r\n        currentSelected === index ? \"open-chat\" : \"\"\r\n      }`}\r\n      onClick={() => changeCurrentChat(index, chat)}\r\n    >\r\n      <figure\r\n        className={\r\n          chat.online === true ? \"avatar avatar-state-success\" : \"avatar\"\r\n        }\r\n      >\r\n        {chat.is_group ? (\r\n          <span className=\"avatar-title bg-warning bg-success rounded-circle\">\r\n            <i className=\"fa fa-users\"></i>\r\n          </span>\r\n        ) : chat?.profile ? (\r\n          <img src={chat?.profile} className=\"rounded-circle\" alt=\"image\" />\r\n        ) : (\r\n          <img\r\n            src=\"dist/media/img/profile-icon.webp\"\r\n            className=\"rounded-circle\"\r\n            alt=\"image\"\r\n          />\r\n        )}\r\n      </figure>\r\n      <div className=\"users-list-body\">\r\n        <div>\r\n          <h5 className=\"text-primary\">\r\n            {chat.is_group ? chat.group_name : chat.username}\r\n          </h5>\r\n          <p>{chat.message === null ? \"\" : chat.message}</p>\r\n        </div>\r\n        <div className=\"users-list-action\">\r\n          <div\r\n            className={`new-message-count ${\r\n              chat.unread_count === 0 ? \"hide-element\" : \"\"\r\n            }`}\r\n          >\r\n            {chat.unread_count}\r\n          </div>\r\n          <small className=\"text-primary\">\r\n            {chat.message_time === null\r\n              ? null\r\n              : formatingDate(chat.message_time)}\r\n          </small>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ChatItem;\r\n","import { useState } from \"react\";\r\nimport ChatItem from \"./ChatItem\";\r\n\r\nfunction ChatSidebar({ chatList, changeChat }) {\r\n  // console.log({chatList})\r\n  const [currentSelected, setCurrentSelected] = useState(undefined);\r\n\r\n  const changeCurrentChat = (index, contact) => {\r\n    setCurrentSelected(index);\r\n    changeChat(contact);\r\n  };\r\n\r\n  return (\r\n    <div id=\"chats\" className=\"sidebar active\">\r\n      <header>\r\n        <span>Chats</span>\r\n        <ul className=\"list-inline\">\r\n          <li\r\n            className=\"list-inline-item\"\r\n            data-toggle=\"tooltip\"\r\n            title=\"New group\"\r\n          >\r\n            <a\r\n              className=\"btn btn-outline-light\"\r\n              onClick={ e => e.preventDefault() }\r\n              data-toggle=\"modal\"\r\n              data-target=\"#newGroup\"\r\n            >\r\n              <i data-feather=\"users\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item\">\r\n            <a\r\n              className=\"btn btn-outline-light\"\r\n              data-toggle=\"tooltip\"\r\n              title=\"New chat\"\r\n              onClick={ e => e.preventDefault() }\r\n              data-navigation-target=\"friends\"\r\n            >\r\n              <i data-feather=\"plus-circle\"></i>\r\n            </a>\r\n          </li>\r\n          <li className=\"list-inline-item d-xl-none d-inline\">\r\n            <a\r\n              onClick={ e => e.preventDefault() }\r\n              className=\"btn btn-outline-light text-danger sidebar-close\"\r\n            >\r\n              <i data-feather=\"x\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </header>\r\n      <form> \r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          placeholder=\"Search chats\"\r\n        />\r\n      </form>\r\n      <div className=\"sidebar-body\">\r\n        <ul className=\"list-group list-group-flush\">\r\n          {chatList?.map((chat, index) => {\r\n            return <ChatItem chat={chat} key={index} index={index} changeCurrentChat={changeCurrentChat} currentSelected={currentSelected}/>\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatSidebar;\r\n","import * as React from 'react';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport Box from '@mui/material/Box';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport Select from '@mui/material/Select';\r\nimport Chip from '@mui/material/Chip';\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 250,\r\n    }\r\n  },\r\n  palette: {\r\n    mode: 'light',\r\n  },\r\n};\r\n\r\nconst names = [\r\n  'Oliver Hansen',\r\n  'Van Henry',\r\n  'April Tucker',\r\n  'Ralph Hubbard',\r\n  'Omar Alexander',\r\n  'Carlos Abbott',\r\n  'Miriam Wagner',\r\n  'Bradley Wilkerson',\r\n  'Virginia Andrews',\r\n  'Kelly Snyder',\r\n];\r\n\r\nfunction getStyles(name, personName, theme) {\r\n  return {\r\n    fontWeight:\r\n      personName.indexOf(name) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\n\r\nexport default function MultipleSelectChip({chatList,personName,handlePersonName}) {\r\n  const theme = useTheme();\r\n  \r\n\r\n  const handleChange = (event) => {\r\n    const {\r\n      target: { value },\r\n    } = event;\r\n\r\n    handlePersonName(value)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <FormControl sx={{ m: 1, width: 300 }}>\r\n        <InputLabel id=\"demo-multiple-chip-label\">Chip</InputLabel>\r\n        <Select\r\n          labelId=\"demo-multiple-chip-label\"\r\n          id=\"demo-multiple-chip\"\r\n          multiple\r\n          value={personName}\r\n          onChange={handleChange}\r\n          input={<OutlinedInput id=\"select-multiple-chip\" label=\"Chip\" />}\r\n          renderValue={(selected) => (\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n              {selected.map((value) => (\r\n                <Chip key={value.username} label={value.username} />\r\n              ))}\r\n            </Box>\r\n          )}\r\n          MenuProps={MenuProps}\r\n        >\r\n          {chatList.map((chat) => (\r\n            <MenuItem\r\n              key={chat.username}\r\n              value={chat}\r\n              style={getStyles(chat, personName, theme)}\r\n            >\r\n              {chat.username}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n\r\n// import * as React from 'react';\r\n// import { useTheme } from '@mui/material/styles';\r\n// import Box from '@mui/material/Box';\r\n// import OutlinedInput from '@mui/material/OutlinedInput';\r\n// import InputLabel from '@mui/material/InputLabel';\r\n// import MenuItem from '@mui/material/MenuItem';\r\n// import FormControl from '@mui/material/FormControl';\r\n// import Select from '@mui/material/Select';\r\n// import Chip from '@mui/material/Chip';\r\n\r\n// const ITEM_HEIGHT = 48;\r\n// const ITEM_PADDING_TOP = 8;\r\n// const MenuProps = {\r\n//   PaperProps: {\r\n//     style: {\r\n//       maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n//       width: 250,\r\n//     },\r\n//   },\r\n// };\r\n\r\n// const names = [\r\n//   'Oliver Hansen',\r\n//   'Van Henry',\r\n//   'April Tucker',\r\n//   'Ralph Hubbard',\r\n//   'Omar Alexander',\r\n//   'Carlos Abbott',\r\n//   'Miriam Wagner',\r\n//   'Bradley Wilkerson',\r\n//   'Virginia Andrews',\r\n//   'Kelly Snyder',\r\n// ];\r\n\r\n// function getStyles(name, personName, theme) {\r\n//   return {\r\n//     fontWeight:\r\n//       personName.indexOf(name) === -1\r\n//         ? theme.typography.fontWeightRegular\r\n//         : theme.typography.fontWeightMedium,\r\n//   };\r\n// }\r\n\r\n// export default function MultipleSelectChip() {\r\n//   const theme = useTheme();\r\n//   const [personName, setPersonName] = React.useState([]);\r\n\r\n//   const handleChange = (event) => {\r\n//     const {\r\n//       target: { value },\r\n//     } = event;\r\n//     console.log(value,typeof value)\r\n//     setPersonName(\r\n//       // On autofill we get a stringified value.\r\n//       typeof value === 'string' ? value.split(',') : value,\r\n//     );\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       <FormControl sx={{ m: 1, width: 300 }}>\r\n//         <InputLabel id=\"demo-multiple-chip-label\">Chip</InputLabel>\r\n//         <Select\r\n//           labelId=\"demo-multiple-chip-label\"\r\n//           id=\"demo-multiple-chip\"\r\n//           multiple\r\n//           value={personName}\r\n//           onChange={handleChange}\r\n//           input={<OutlinedInput id=\"select-multiple-chip\" label=\"Chip\" />}\r\n//           renderValue={(selected) => (\r\n//             <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n//               {selected.map((value) => (\r\n//                 <Chip key={value} label={value} />\r\n//               ))}\r\n//             </Box>\r\n//           )}\r\n//           MenuProps={MenuProps}\r\n//         >\r\n//           {names.map((name) => (\r\n//             <MenuItem\r\n//               key={name}\r\n//               value={name}\r\n//               style={getStyles(name, personName, theme)}\r\n//             >\r\n//               {name}\r\n//             </MenuItem>\r\n//           ))}\r\n//         </Select>\r\n//       </FormControl>\r\n//     </div>\r\n//   );\r\n// }","import React,{useRef, useState} from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport MultipleSelectChip from \"./Multiselect\";\r\n\r\n\r\nfunction CreateGroup({chatList,currentUser,appendGroupInChatList}){\r\n    const closeModalRef= useRef(null);\r\n    \r\n    const [personName, setPersonName] = React.useState([]);\r\n\r\n    const handleSubmit  = async (e)=>{\r\n        e.preventDefault();\r\n        const selected=[];\r\n        selected.push(currentUser._id.$oid)\r\n        for(let i=0;i<personName.length;i++){\r\n            selected.push(personName[i]._id.$oid)\r\n        }\r\n        let response = await axios.post(\r\n            `${process.env.REACT_APP_BASE_URL}/api/user/create-group`,\r\n            {\r\n                \"participants\" : selected,\r\n                \"group_name\" : e.target[0].value\r\n            },\r\n            {\r\n                headers : {\r\n                    \"Authorization\" : `Bearer ${localStorage.getItem(\"access_token\")}`\r\n                },\r\n                \r\n            }\r\n        )\r\n\r\n        if(response.data.data){\r\n            appendGroupInChatList(response.data.data)\r\n        }\r\n        closeModalRef.current.classList.remove(\"show\");\r\n    }\r\n\r\n    function handlePersonName(value){\r\n        setPersonName(\r\n            typeof value === 'string' ? value.split(',') : value,\r\n          );\r\n    }\r\n    return (\r\n        <div className=\"modal fade\" id=\"newGroup\" tabndex=\"-1\" role=\"dialog\" aria-hidden=\"true\" ref={closeModalRef}>\r\n            <div className=\"modal-dialog modal-dialog-centered modal-dialog-zoom\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">\r\n                            <i data-feather=\"users\" className=\"mr-2\"></i> New Group\r\n                        </h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <i className=\"ti-close\"></i>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <form onSubmit={(e)=>handleSubmit(e)}>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"group_name\" className=\"col-form-label\">Group name</label>\r\n                                <div className=\"input-group\">\r\n                                    <input type=\"text\" className=\"form-control\" id=\"group_name\"/>\r\n                                    <div className=\"input-group-append\">\r\n                                        <button className=\"btn btn-light\" data-toggle=\"tooltip\" title=\"Emoji\" type=\"button\">\r\n                                            <i data-feather=\"smile\"></i>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"mb-2\">The group members</p>\r\n                            <div className=\"form-group\">\r\n                                <div className=\"avatar-group\">\r\n                                    <div className=\"userList\"  >\r\n                                        <MultipleSelectChip chatList={chatList} personName={personName} handlePersonName={handlePersonName}/>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"description\" className=\"col-form-label\">Description</label>\r\n                                <textarea className=\"form-control\" id=\"description\"></textarea>\r\n                            </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"submit\" className=\"btn btn-primary\" >Create Group</button>\r\n                                </div>\r\n                        </form>\r\n                    </div>  \r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateGroup;","function SidebarGroup({currentUser}){\r\n    return  (\r\n        <div className=\"sidebar-group\">\r\n            <div id=\"contact-information\" className=\"sidebar\">\r\n                <header>\r\n                    <span>Profile</span>\r\n                    <ul className=\"list-inline\">\r\n                        <li className=\"list-inline-item\">\r\n                            <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light text-danger sidebar-close\">\r\n                                <i data-feather=\"x\"></i>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </header>\r\n                <div className=\"sidebar-body\">\r\n                    <div className=\"pl-4 pr-4\">\r\n                        <div className=\"text-center\">\r\n                            <figure className=\"avatar avatar-xl mb-4\">\r\n                                {\r\n                                    currentUser?.profile ? \r\n                                        <img src={currentUser?.profile} className=\"rounded-circle\" alt=\"image\"/> \r\n                                    :\r\n                                        <img src=\"dist/media/img/profile-icon.webp\" className=\"rounded-circle\" alt=\"image\"/>\r\n                                }\r\n                            </figure>\r\n                            <h5 className=\"mb-1\">{currentUser?.username}</h5>\r\n                            <small className=\"text-muted font-italic\">Last seen: Today</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n     )\r\n}\r\n\r\nexport default SidebarGroup;","import { useState } from \"react\";\r\n\r\nfunction FriendsSidebar({friendsList,changeChat}){\r\n    const [currentSelected,setCurrentSelected] = useState(undefined)\r\n\r\n    const changeCurrentChat = (index,contact) => {\r\n        setCurrentSelected(index);\r\n        changeChat(contact)  \r\n    }\r\n\r\n    return <div id=\"friends\" className=\"sidebar\">\r\n    <header>\r\n        <span>Friends</span>\r\n        <ul className=\"list-inline\">\r\n            <li className=\"list-inline-item\" data-toggle=\"tooltip\" title=\"Add friends\">\r\n                <a className=\"btn btn-outline-light\" onClick={ e => e.preventDefault() } data-toggle=\"modal\" data-target=\"#addFriends\">\r\n                    <i data-feather=\"user-plus\"></i>\r\n                </a>\r\n            </li>\r\n            <li className=\"list-inline-item d-xl-none d-inline\">\r\n                <a onClick={ e => e.preventDefault() } className=\"btn btn-outline-light text-danger sidebar-close\">\r\n                    <i data-feather=\"x\"></i>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </header>\r\n    <form >\r\n        <input type=\"text\" className=\"form-control\" placeholder=\"Search friends\"/>\r\n    </form>\r\n    <div className=\"sidebar-body\">\r\n        <ul className=\"list-group list-group-flush\">\r\n        {\r\n            friendsList?.map((friend,index) => {\r\n                return (\r\n                    <li key={friend._id.$oid} className=\"list-group-item\" data-navigation-target=\"chats\" onClick={() => changeCurrentChat(index, friend)}>\r\n                        <div>\r\n                            <figure className=\"avatar\">\r\n                                {\r\n                                    friend.profile \r\n                                        ? \r\n                                            <img src={friend?.profile} className=\"rounded-circle\" alt=\"image\"/>\r\n                                        : \r\n                                            <img src=\"dist/media/img/profile-icon.webp\" className=\"rounded-circle\" alt=\"image\"/>\r\n                                }\r\n                            </figure>\r\n                        </div>\r\n                        <div className=\"users-list-body\">\r\n                            <div>\r\n                                <h5>{friend.username}</h5>\r\n                            </div>\r\n                            <div className=\"users-list-action\">\r\n                                <div className=\"action-toggle\">\r\n                                    <div className=\"dropdown\">\r\n                                        <a data-toggle=\"dropdown\" onClick={ e => e.preventDefault() }>\r\n                                            <i data-feather=\"more-horizontal\"></i>\r\n                                        </a>\r\n                                        <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                            <a onClick={ e => e.preventDefault() } className=\"dropdown-item\">New chat</a>\r\n                                            <a onClick={ e => e.preventDefault() } data-navigation-target=\"contact-information\"\r\n                                            className=\"dropdown-item\">Profile</a>\r\n                                            <div className=\"dropdown-divider\"></div>\r\n                                            <a onClick={ e => e.preventDefault() } className=\"dropdown-item text-danger\">Block</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                )\r\n            })\r\n        }    \r\n        </ul>\r\n    </div>\r\n</div>\r\n}\r\n\r\nexport default FriendsSidebar;","import axios from \"axios\";\r\nimport {io} from \"socket.io-client\"\r\nimport Chat from \"./components/Chat\"\r\nimport Archived from \"./components/Archived\";\r\nimport {useNavigate } from 'react-router-dom';\r\nimport Favorites from \"./components/Favorites\";\r\nimport Navigation from \"./components/Navigation\";\r\nimport { useState,useEffect,useRef } from \"react\";\r\nimport EditProfile from \"./components/EditProfile\";\r\nimport ChatSidebar from \"./components/ChatSidebar\";\r\nimport CreateGroup from \"./components/CreateGroup\";\r\nimport SidebarGroup from \"./components/SidebarGroup\";\r\nimport FriendsSidebar from \"./components/FriendsSidebar\";\r\n\r\nfunction ChatPage () {\r\n    const socket = useRef();\r\n    const navigate = useNavigate();\r\n    const [chatList,setChatList] = useState([])\r\n    const [isLoggedIn,setIsLoggedIn] = useState(false)\r\n    const [friendsList,setFriendsList] = useState([])\r\n    const [currentChat,setCurrentChat] = useState(undefined)\r\n    const [previousChat,setPreviousChat] = useState(undefined)\r\n    const [currentUser,setCurrentUser] = useState(JSON.parse(localStorage.getItem(\"user\")))\r\n\r\n    useEffect(() => {\r\n        const reloadPage = localStorage.getItem('reload');\r\n        if (reloadPage === '1') {\r\n           localStorage.setItem('reload', '0');\r\n           window.location.reload();\r\n        }\r\n    }, []);\r\n\r\n    function sortSideBar(data) {\r\n        return data.sort(function(a, b){\r\n            var dateB = new Date(b.message_time)\r\n            if (a.message_time) {\r\n                var dateA = new Date(a.message_time)\r\n            } else {\r\n                var dateA = new Date(a.chat_created_at)\r\n            }\r\n            return dateA < dateB ? 1 : -1;\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        function settingCurUser(){\r\n            if (!localStorage.getItem(\"user\")){\r\n                navigate(\"/\");\r\n            }\r\n            else{\r\n                setIsLoggedIn(true)\r\n            }\r\n        }\r\n        settingCurUser()\r\n      }, [isLoggedIn]);\r\n\r\n    useEffect(() => {\r\n        async function getUser() {\r\n            const response = await axios.get(\r\n                `${process.env.REACT_APP_BASE_URL}/api/user/get-user`,\r\n                {\r\n                    headers: {\r\n                        \"Authorization\" : `Bearer ${localStorage.getItem(\"access_token\")}`\r\n                    }\r\n                }\r\n            )\r\n            if(localStorage.getItem(\"user\"))\r\n                localStorage.setItem(\"user\",JSON.stringify(response.data.data))\r\n        }\r\n        if(isLoggedIn)\r\n            getUser()\r\n    },[currentUser])\r\n\r\n    useEffect(() => {\r\n        if(isLoggedIn){    \r\n            socket.current = io(`${process.env.REACT_APP_BASE_URL}`)\r\n            socket.current.on(\"connect\",() => {\r\n                socket.current.emit(\"add-user\",currentUser._id.$oid)\r\n            })\r\n        }\r\n        // socket.current.on(\"disconnect\",()=>{\r\n        //     socket.current.emit(\"offline\",currentUser._id.$oid,(data) => alert(data))\r\n        // })\r\n    },[isLoggedIn])\r\n\r\n    useEffect(()=>{\r\n        async function settingFriendsList(){\r\n            let access_token = localStorage.getItem(\"access_token\")\r\n            const friends_list = await axios.get(\r\n                `${process.env.REACT_APP_BASE_URL}/api/user/get-all-users`,\r\n                {\r\n                    headers: {\r\n                        \"Authorization\" : `Bearer ${access_token}`\r\n                    }\r\n                }\r\n            )\r\n            setFriendsList(friends_list.data.data)\r\n        }\r\n        if(isLoggedIn)\r\n            settingFriendsList()\r\n    },[currentChat,isLoggedIn])\r\n\r\n    useEffect(()=>{\r\n        async function settingChatList(){\r\n            let access_token = localStorage.getItem(\"access_token\")\r\n            const chat_list = await axios.get(\r\n                `${process.env.REACT_APP_BASE_URL}/api/user/get-all-chats`,\r\n                {\r\n                    headers: {\r\n                        \"Authorization\" : `Bearer ${access_token}`\r\n                    }\r\n                }\r\n            )\r\n            console.log(\"chats : \",chat_list.data.data)\r\n            const sorted_chat_list = sortSideBar(chat_list.data.data)\r\n            console.log(\"chats : \",sorted_chat_list)\r\n            setChatList(sorted_chat_list)\r\n        }\r\n\r\n        if(isLoggedIn)\r\n            settingChatList()\r\n    },[currentChat,isLoggedIn])\r\n\r\n    const handleChatChange = (chat) => {\r\n        setPreviousChat(currentChat)\r\n        setCurrentChat(chat)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(isLoggedIn){    \r\n            socket.current.on(\"user-online\",(data) => {\r\n                const temp = structuredClone(chatList)\r\n                for(let i=0;i<temp.length;i++){\r\n                    if(temp[i]._id.$oid === data)\r\n                    {\r\n                        temp[i].online = true\r\n                    }\r\n                }\r\n                console.log('temp', temp);\r\n                setChatList(temp)\r\n            })\r\n        }\r\n\r\n        // socket.current.on(\"user-offline\",(data) => {\r\n        //     alert(\"disconnecting\")\r\n        //     const disconnect_list = chatList.map((chat,index) => {\r\n        //         if(chat._id.$oid === data)\r\n        //         {\r\n        //             chat.online = false\r\n        //         }\r\n        //     })\r\n        //     setChatList(disconnect_list)\r\n        // })\r\n    },[chatList,isLoggedIn])\r\n\r\n    useEffect(() => {\r\n        if(isLoggedIn){\r\n            socket.current.on(\r\n                \"unread-count\",\r\n                (data) => {\r\n                    const new_chat_list = structuredClone(chatList);\r\n                    let room_exist = false\r\n                    new_chat_list.forEach((chat,index) => {\r\n                        if(chat.room_id === data.room_id){\r\n                            chat.message = data.message\r\n                            chat.unread_count = data.unread_count\r\n                            chat.message_time = data.time\r\n                            room_exist = true\r\n                        }\r\n                    })\r\n                    if(!room_exist){\r\n                        socket.current.emit(\r\n                            \"get-room-detail\",\r\n                            {\r\n                                room_id:data.room_id,\r\n                                user_id:currentUser._id.$oid\r\n                            },\r\n                            (data) => new_chat_list.push(data)\r\n                        )\r\n                    }\r\n                    console.log('new_chat_list - 181', new_chat_list);\r\n                    const sorted_chat_list = sortSideBar(new_chat_list)\r\n                    console.log('sorted_chat_list - 181', sorted_chat_list);\r\n                    setChatList(sorted_chat_list)\r\n                })\r\n        }\r\n    },[chatList,isLoggedIn])\r\n\r\n    function refectChangesOnChatbarAfterSendingMessage(data) {\r\n        \r\n        const new_chat_list = structuredClone(chatList);\r\n        new_chat_list.forEach((chat,index) => {\r\n            if(chat.room_id === data.room_id && currentUser._id.$oid===data.from){\r\n                chat.message = data.message\r\n                chat.unread_count = 0\r\n                chat.message_time = data.time\r\n            }\r\n            if(chat.room_id === data.room_id && currentUser._id.$oid!==data.from){\r\n                chat.message = data.message\r\n                chat.message_time = data.time\r\n            }\r\n        })\r\n        console.log('new_chat_list - 204', new_chat_list);\r\n        const sorted_chat_list = sortSideBar(new_chat_list)\r\n        console.log('sorted_chat_list - 206', sorted_chat_list);\r\n        setChatList(sorted_chat_list)\r\n    }\r\n\r\n    function appendGroupInChatList(group_info){\r\n        const new_chat_list = structuredClone(chatList);\r\n        new_chat_list.push(group_info)\r\n        console.log('new_chat_list - 212', new_chat_list);\r\n        setChatList(new_chat_list)\r\n    }\r\n\r\n    function updateImage(imageURL){\r\n        let update_current_user = structuredClone(currentUser)\r\n        update_current_user.profile = imageURL\r\n        setCurrentUser(update_current_user)\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <CreateGroup chatList={chatList} currentUser={currentUser} appendGroupInChatList={appendGroupInChatList}/>\r\n            <EditProfile currentUser={currentUser} updateImage={updateImage}/>\r\n            <div className=\"layout\" >\r\n                <Navigation currentUser={currentUser} />\r\n                <div className=\"content\">\r\n                    <div className=\"sidebar-group\">\r\n                        <ChatSidebar chatList={chatList} changeChat={handleChatChange}/>\r\n                        <FriendsSidebar friendsList={friendsList} changeChat={handleChatChange}/>\r\n                        <Favorites/>\r\n                        <Archived/>\r\n                    </div>\r\n                    {\r\n                        currentChat === undefined ? \r\n                        (<div className=\"container m-0, p-0\">\r\n                            <img className=\"chat-bg-img\" src=\"/bg image.webp\"></img>\r\n                        </div>) :\r\n                        (<Chat currentChat={currentChat} currentUser={currentUser} socket={socket} previousChat={previousChat} refectChangesOnChatbarAfterSendingMessage={refectChangesOnChatbarAfterSendingMessage}/>)\r\n\r\n                    }\r\n                    <SidebarGroup currentUser={currentUser}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatPage;","import Login from './pages/login/Login'\r\nimport Register from './pages/register/Register';\r\nimport ChatPage from './pages/chat/ChatPage';\r\nimport { createBrowserRouter } from \"react-router-dom\";\r\n\r\nconst router = createBrowserRouter([\r\n     {path: '/', element: <Login />},\r\n     {path: '/register', element: <Register />},\r\n     {path: '/chat', element: <ChatPage />}\r\n])\r\nexport default router","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport {RouterProvider} from \"react-router-dom\";\nimport reportWebVitals from './reportWebVitals';\nimport router from './router'\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <RouterProvider router={router} />\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}